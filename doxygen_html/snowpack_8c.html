<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Boreal Ecosystem Productivity Simulator Hourly v4.10: snowpack.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Boreal Ecosystem Productivity Simulator Hourly v4.10
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">snowpack.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This module will calculate the percentage of canopy and ground covered by snow and output albedo of snow (used in energy balance) and density of snow in this step.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="beps_8h_source.html">beps.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7970c5267f32a503569127e3ba702edd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="snowpack_8c.html#a7970c5267f32a503569127e3ba702edd">snowpack_stage1</a> (double temp_air, double precipitation, double mass_snow_o_last, double mass_snow_u_last, double mass_snow_g_last, double *mass_snow_o, double *mass_snow_u, double *mass_snow_g, double lai_o, double lai_u, double clumping, double *area_snow_o, double *area_snow_u, double *percent_snow_o, double *percent_snow_u, double *percent_snow_g, double *density_snow, double *depth_snow, double *albedo_v_snow, double *albedo_n_snow)</td></tr>
<tr class="memdesc:a7970c5267f32a503569127e3ba702edd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function of snowpack stage1.  <a href="snowpack_8c.html#a7970c5267f32a503569127e3ba702edd">More...</a><br /></td></tr>
<tr class="separator:a7970c5267f32a503569127e3ba702edd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d6185a683cfa4bcc98870f6108666bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="snowpack_8c.html#a6d6185a683cfa4bcc98870f6108666bc">snowpack_stage2</a> (double evapo_snow_o, double evapo_snow_u, double *mass_snow_o, double *mass_snow_u)</td></tr>
<tr class="memdesc:a6d6185a683cfa4bcc98870f6108666bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function of snowpack stage2. This module will calculate the snow remained on canopy surface after evaporation in this step.  <a href="snowpack_8c.html#a6d6185a683cfa4bcc98870f6108666bc">More...</a><br /></td></tr>
<tr class="separator:a6d6185a683cfa4bcc98870f6108666bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21f2bf33a62ab7d7acba0decde33b961"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="snowpack_8c.html#a21f2bf33a62ab7d7acba0decde33b961">snowpack_stage3</a> (double temp_air, double temp_snow, double temp_snow_last, double density_snow, double *depth_snow, double *depth_water, double *mass_snow_g)</td></tr>
<tr class="memdesc:a21f2bf33a62ab7d7acba0decde33b961"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function of snowpack stage3. This module simulates the process of snow melting and water frozen in this step.  <a href="snowpack_8c.html#a21f2bf33a62ab7d7acba0decde33b961">More...</a><br /></td></tr>
<tr class="separator:a21f2bf33a62ab7d7acba0decde33b961"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This module will calculate the percentage of canopy and ground covered by snow and output albedo of snow (used in energy balance) and density of snow in this step. </p>
<p >[snowpack_stage1] happens before any consumption of snow in this step, after the snow fall (supply)</p>
<p >[snowpack_stage2] happens after sublimation from ground and canopy (demand)</p>
<p >[snowpack stage3] happens after frozen and melt of snow pack (demand) </p><dl class="section author"><dt>Author</dt><dd>XZ Luo </dd></dl>
<dl class="section date"><dt>Date</dt><dd>May 25, 2015 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a7970c5267f32a503569127e3ba702edd" name="a7970c5267f32a503569127e3ba702edd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7970c5267f32a503569127e3ba702edd">&#9670;&nbsp;</a></span>snowpack_stage1()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void snowpack_stage1 </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>temp_air</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>precipitation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>mass_snow_o_last</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>mass_snow_u_last</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>mass_snow_g_last</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>mass_snow_o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>mass_snow_u</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>mass_snow_g</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lai_o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lai_u</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>clumping</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>area_snow_o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>area_snow_u</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>percent_snow_o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>percent_snow_u</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>percent_snow_g</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>density_snow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>depth_snow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>albedo_v_snow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>albedo_n_snow</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function of snowpack stage1. </p>
<p >[snowpack_stage1] happens before any consumption of snow in this step, after the snow fall (supply)</p>
<p >[Input] air temperature, precipitation,depth of snow from last step, density of snow from last step, mass of snow on canopy and ground (per ground area) from last step, length of step, leaf area index of overstorey and understorey excluding stem, albedo of snow from last step.</p>
<p >[Output] mass of snow on canopy and ground accumulation of snowfall, albedo of snow in this step, density of snow in this step. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">temp_air</td><td>air temperature </td></tr>
    <tr><td class="paramname">precipitation</td><td>precipitation (m/s) </td></tr>
    <tr><td class="paramname">mass_snow_o_last</td><td>weight of snow at overstorey from last step </td></tr>
    <tr><td class="paramname">mass_snow_u_last</td><td>weight of snow at understorey from last step </td></tr>
    <tr><td class="paramname">mass_snow_g_last</td><td>weight of snow on ground from last step </td></tr>
    <tr><td class="paramname">mass_snow_o</td><td>mass of intercepted snow at overstory, input from last step, kg/m2 </td></tr>
    <tr><td class="paramname">mass_snow_u</td><td>mass of intercepted snow at understory, input from last step, kg/m2 </td></tr>
    <tr><td class="paramname">mass_snow_g</td><td>mass of intercepted snow on ground, input from last step, kg/m2 </td></tr>
    <tr><td class="paramname">lai_o</td><td>overstory lai </td></tr>
    <tr><td class="paramname">lai_u</td><td>understory lai </td></tr>
    <tr><td class="paramname">clumping</td><td>clumping index </td></tr>
    <tr><td class="paramname">area_snow_o</td><td>area of snow at overstorey </td></tr>
    <tr><td class="paramname">area_snow_u</td><td>area of snow at understorey </td></tr>
    <tr><td class="paramname">percent_snow_o</td><td>percentage of snow cover at overstory, DECIDED by weight </td></tr>
    <tr><td class="paramname">percent_snow_u</td><td>percentage of snow cover at understory, DECIDED by weight </td></tr>
    <tr><td class="paramname">percent_snow_g</td><td>percentage of snow cover on ground, DECIDED by weight </td></tr>
    <tr><td class="paramname">density_snow</td><td>density of snowpack on ground, input from last step, then changed in this module </td></tr>
    <tr><td class="paramname">depth_snow</td><td>depth of snowpack, input from last step, changed here, then changed in stage2 </td></tr>
    <tr><td class="paramname">albedo_v_snow</td><td>visible albedo of snow, input from this step, changed in this module </td></tr>
    <tr><td class="paramname">albedo_n_snow</td><td>near infrared albedo of snow, input from this step, changed in this module </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a id="a6d6185a683cfa4bcc98870f6108666bc" name="a6d6185a683cfa4bcc98870f6108666bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d6185a683cfa4bcc98870f6108666bc">&#9670;&nbsp;</a></span>snowpack_stage2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void snowpack_stage2 </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>evapo_snow_o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>evapo_snow_u</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>mass_snow_o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>mass_snow_u</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function of snowpack stage2. This module will calculate the snow remained on canopy surface after evaporation in this step. </p>
<p >[snowpack_stage2] happens after sublimation from ground and canopy (demand)</p>
<p >[input] mass of snow on leaves after precipitation in this step, sublimation from leaves in this step</p>
<p >[output] mass of snow on leaves after the sublimation on leaves in this step </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">evapo_snow_o</td><td>evaporation of intercepted rain in this step, overstorey, kg/m2/s = mm/s </td></tr>
    <tr><td class="paramname">evapo_snow_u</td><td>evaporation of intercepted rain in this step, understorey, kg/m2/s = mm/s </td></tr>
    <tr><td class="paramname">mass_snow_o</td><td>supply of rain on leaves, overstorey, already added precipitation in this step </td></tr>
    <tr><td class="paramname">mass_snow_u</td><td>supply of rain on leaves, understorey, already added precipitation in this step </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a id="a21f2bf33a62ab7d7acba0decde33b961" name="a21f2bf33a62ab7d7acba0decde33b961"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21f2bf33a62ab7d7acba0decde33b961">&#9670;&nbsp;</a></span>snowpack_stage3()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void snowpack_stage3 </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>temp_air</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>temp_snow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>temp_snow_last</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>density_snow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>depth_snow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>depth_water</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>mass_snow_g</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function of snowpack stage3. This module simulates the process of snow melting and water frozen in this step. </p>
<p >[snowpack stage3] happens after frozen and melt of snow pack (demand)</p>
<p >[input] depth of snow on ground after stage 1, air temperature, ground surface temperature</p>
<p >[output] the amount of the melted snow, frozen snow </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">temp_air</td><td>temperature of air in this step </td></tr>
    <tr><td class="paramname">temp_snow</td><td>temperature of snow in this step </td></tr>
    <tr><td class="paramname">temp_snow_last</td><td>temperature of snow in last step </td></tr>
    <tr><td class="paramname">density_snow</td><td>density of snow output from stage1 </td></tr>
    <tr><td class="paramname">depth_snow</td><td>depth of snow on ground after stage1 </td></tr>
    <tr><td class="paramname">mass_snow_g</td><td>mass of snow on ground after stage1 </td></tr>
    <tr><td class="paramname">depth_water</td><td>depth of water after all precipitation and evaporation </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
